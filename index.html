<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RUMPHANPI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;600;700&display=swap');
      
      body {
        font-family: 'Kanit', sans-serif;
        background: linear-gradient(135deg, #0f0f15 0%, #1a1a2e 100%);
      }
      
      .xenon-text {
        background: linear-gradient(90deg, #00d4ff 0%, #6a00ff 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 10px rgba(106, 0, 255, 0.3);
      }
      
      .glow-effect {
        box-shadow: 0 0 15px rgba(106, 0, 255, 0.5);
      }
      
      .main-btn {
        background: linear-gradient(90deg, #6a00ff 0%, #00d4ff 100%);
        transition: all 0.3s ease;
        font-size: 1.25rem;
        padding: 1rem 2rem;
      }
      .main-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(106, 0, 255, 0.4);
      }
      
      .xenon-border {
        border: 1px solid rgba(106, 0, 255, 0.3);
      }
      
      /* สไตล์สำหรับ modal */
      .modal {
        display: none;
        position: fixed;
        z-index: 100;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.7);
      }
      
      .modal-content {
        background: linear-gradient(135deg, #1a1a2e 0%, #0f0f15 100%);
        margin: 15% auto;
        padding: 2rem;
        border: 1px solid rgba(106, 0, 255, 0.3);
        border-radius: 12px;
        width: 80%;
        max-width: 400px;
      }
    </style>
  </head>
  <body class="text-white min-h-screen flex flex-col">
    <!-- Header -->
    <header class="flex justify-between items-center px-8 py-4 xenon-border border-b">
      <a href="index.html" class="flex items-center space-x-2 hover:opacity-80">
        <img src="imv/R1.png" class="h-6" alt="RUMPHANPI LOGO" />
        <span class="text-lg font-bold xenon-text">RUMPHANPI</span>
      </a>
      <nav class="hidden md:flex space-x-8 text-sm">
        <a href="#" class="hover:text-purple-300 transition-colors">หน้าหลัก</a>
        <a href="#" class="hover:text-purple-300 transition-colors">เช็คของ</a>
        <a href="บ้าน.html" class="hover:text-purple-300 transition-colors">บ้าน</a>
        <a href="#" class="hover:text-purple-300 transition-colors">ติดต่อ</a>
      </nav>
      <!-- ปุ่มล็อกอิน Discord -->
      <button id="discordLoginBtn" class="text-white px-4 py-2 rounded-full flex items-center gap-2 glow-effect">
        <img src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a6a49cf127bf92de1e2_icon_clyde_blurple_RGB.png" 
             class="h-5 w-5" 
             alt="Discord Icon" />
        <span class="hidden sm:inline">ล็อกอินด้วย Discord</span>
        <span class="sm:hidden">ล็อกอิน</span>
      </button>
    </header>

    <!-- Hero Section -->
    <main class="flex-grow flex flex-col items-center justify-center px-6 py-12 text-center">
      <div class="mb-8 max-w-2xl w-full">
        <h1 class="text-6xl md:text-7xl font-bold mb-6 xenon-text">
          RUMPHANPI
        </h1>
        <p class="text-xl md:text-2xl mb-8 text-gray-300">
          ชุมชนสำหรับผู้ชื่นชอบ NFT และเทคโนโลยีบล็อกเชน
        </p>
        
        <!-- Avatar Stack -->
        <div class="mb-8">
          <div class="flex justify-center -space-x-3 mb-3">
            <img class="w-12 h-12 rounded-full border-2 border-purple-500" src="https://i.imgur.com/1.jpg" alt="User 1" />
            <img class="w-12 h-12 rounded-full border-2 border-purple-500" src="https://i.imgur.com/2.jpg" alt="User 2" />
            <img class="w-12 h-12 rounded-full border-2 border-purple-500" src="https://i.imgur.com/3.jpg" alt="User 3" />
            <img class="w-12 h-12 rounded-full border-2 border-purple-500" src="https://i.imgur.com/4.jpg" alt="User 4" />
          </div>
          <p class="text-gray-400 text-sm">สมาชิกมากกว่า 1,000 คนแล้ว!</p>
        </div>

        <!-- ปุ่มเริ่มต้น (อยู่กึ่งกลางและใหญ่ขึ้น) -->
        <div class="flex justify-center mt-8">
          <a href="#" class="main-btn text-white rounded-full font-semibold glow-effect">
            เริ่มต้นเลย!
          </a>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="xenon-border border-t py-8 px-8 text-center">
      <div class="container mx-auto">
        <p class="text-gray-400 text-sm">© 2025 RUMPHANPI. All rights reserved.</p>
      </div>
    </footer>

    <!-- Modal สำหรับล็อกอิน -->
    <div id="loginModal" class="modal">
      <div class="modal-content">
        <span class="close" style="float: right; cursor: pointer;">&times;</span>
        <h2 class="text-2xl font-bold mb-4 xenon-text">ล็อกอินด้วย Discord</h2>
        <p class="mb-4">กรุณากดปุ่มด้านล่างเพื่อล็อกอินผ่าน Discord</p>
        <a href="https://discord.com/oauth2/authorize?client_id=YOUR_CLIENT_ID&redirect_uri=YOUR_REDIRECT_URI&response_type=code&scope=identify%20email" 
           class="discord-btn text-white px-4 py-2 rounded-full flex items-center justify-center gap-2 glow-effect">
          <img src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a6a49cf127bf92de1e2_icon_clyde_blurple_RGB.png" 
               class="h-5 w-5" 
               alt="Discord Icon" />
          ล็อกอินด้วย Discord
        </a>
      </div>
    </div>

    <!-- เอฟเฟกต์พื้นหลังแบบ Xenon Hub -->
    <div class="fixed inset-0 -z-10 overflow-hidden">
      <div class="absolute top-1/4 left-1/4 w-32 h-32 rounded-full bg-purple-900 opacity-20 blur-3xl animate-pulse"></div>
      <div class="absolute top-1/2 right-1/3 w-48 h-48 rounded-full bg-blue-900 opacity-20 blur-3xl animate-pulse delay-300"></div>
      <div class="absolute bottom-1/4 right-1/4 w-40 h-40 rounded-full bg-indigo-900 opacity-20 blur-3xl animate-pulse delay-700"></div>
    </div>

    <script>
      // เปิด Modal ล็อกอิน
      const loginBtn = document.getElementById('discordLoginBtn');
      const modal = document.getElementById('loginModal');
      const span = document.getElementsByClassName('close')[0];
      
      loginBtn.onclick = function() {
        modal.style.display = 'block';
      }
      
      span.onclick = function() {
        modal.style.display = 'none';
      }
      
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = 'none';
        }
      }
      
      // ตรวจสอบการล็อกอินเมื่อโหลดหน้า
      document.addEventListener('DOMContentLoaded', function() {
        // ตรวจสอบว่ามี token ใน localStorage หรือไม่
        const userToken = localStorage.getItem('discordToken');
        
        if(userToken) {
          // ถ้ามี token ให้ดึงข้อมูลผู้ใช้
          fetch('/api/user', {
            headers: {
              'Authorization': `Bearer ${userToken}`
            }
          })
          .then(response => response.json())
          .then(data => {
            // แสดงข้อมูลผู้ใช้
            console.log('ผู้ใช้ล็อกอินแล้ว:', data);
            updateUIForLoggedInUser(data);
          })
          .catch(error => {
            console.error('Error:', error);
            localStorage.removeItem('discordToken');
          });
        }
      });
      
      // ฟังก์ชันอัพเดท UI เมื่อล็อกอิน
      function updateUIForLoggedInUser(user) {
        const loginBtn = document.getElementById('discordLoginBtn');
        loginBtn.innerHTML = `
          <img class="w-6 h-6 rounded-full" src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png" alt="User Avatar" />
          <span>${user.username}</span>
        `;
      }
      
      // ตรวจสอบ URL สำหรับ code จาก Discord
      const urlParams = new URLSearchParams(window.location.search);
      const code = urlParams.get('code');
      
      if(code) {
        // ส่ง code ไปยังเซิร์ฟเวอร์เพื่อรับ token
        fetch('/auth/discord/callback', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ code: code }),
        })
        .then(response => response.json())
        .then(data => {
          if(data.token) {
            // บันทึก token และรีเฟรชหน้า
            localStorage.setItem('discordToken', data.token);
            window.location.href = window.location.pathname;
          }
        })
        .catch(error => {
          console.error('Error:', error);
        });
      }
    </script>
  </body>
</html>
